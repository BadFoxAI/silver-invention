<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>A-Frame Physics World v2</title>
    <meta name="description" content="A-Frame Physics World with Environment and Basic Assets">

    <!-- A-Frame Library -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

    <!-- A-Frame Physics System -->
    <script src="https://unpkg.com/aframe-physics-system@4.3.1/dist/aframe-physics-system.min.js"></script>

    <!-- A-Frame Environment Component for nice presets -->
    <script src="https://unpkg.com/aframe-environment-component@1.3.9/dist/aframe-environment-component.min.js"></script>

</head>
<body>
    <!-- Enable physics system on the scene AND turn on debug view -->
    <a-scene physics="gravity: -9.8; debug: true;"> <!-- DEBUG ENABLED -->

        <!-- Assets Management System (Good practice) -->
        <a-assets>
            <!-- Define reusable materials if needed -->
            <a-mixin id="dynamic" dynamic-body="shape: auto; linearDamping: 0.05; angularDamping: 0.05;"></a-mixin>
            <a-mixin id="wood" material="color: #A0522D; roughness: 0.8;"></a-mixin>
            <a-mixin id="stone" material="color: #808080; roughness: 0.7;"></a-mixin>
        </a-assets>

        <!-- Environment Component -->
        <!-- This replaces manual sky, ground, and basic lighting -->
        <!-- The ground created by this component will automatically get a static body if physics is present -->
        <a-entity environment="preset: forest; ground: hills; groundYScale: 3; groundTexture: walkernoise; groundColor: #524439; groundColor2: #695748; dressing: trees; dressingAmount: 30; dressingScale: 3; fog: 0.8; shadow: true;"></a-entity>


        <!-- Player Rig -->
        <a-entity id="player"
                  position="0 5 8" <!-- Start higher up, further back -->
                  wasd-controls="acceleration: 80"
                  dynamic-body="shape: capsule; mass: 5; linearDamping: 0.9; angularFactor: 0 0 0;"
                  >
            <a-camera look-controls="pointerLockEnabled: true">
                 <!-- Make cursor smaller and semi-transparent -->
                <a-cursor scale="0.5 0.5 0.5" color="#FFF" opacity="0.5"></a-cursor>
            </a-camera>
        </a-entity>


        <!-- Dynamic Objects -->
        <!-- Using mixins for physics and material -->

        <!-- Crates -->
        <a-box mixin="dynamic wood" position="-3 8 -5" rotation="10 30 5" width="1.5" height="1.5" depth="1.5" shadow="cast: true"></a-box>
        <a-box mixin="dynamic wood" position="-4 10 -5.5" rotation="-5 10 20" width="1.5" height="1.5" depth="1.5" shadow="cast: true"></a-box>

        <!-- Boulders -->
        <a-sphere mixin="dynamic stone" position="2 6 -6" radius="1.2" shadow="cast: true"></a-sphere>
        <a-sphere mixin="dynamic stone" position="3 9 -7" radius="0.8" shadow="cast: true"></a-sphere>

        <!-- Pillar -->
        <a-cylinder mixin="dynamic stone" position="5 5 -4" radius="0.7" height="4" shadow="cast: true"></a-cylinder>

        <!-- Floating Torus (will fall) -->
        <a-torus mixin="dynamic" material="color: #FFD700; metalness: 0.5;" position="-6 12 -8" radius="1.5" radius-tubular="0.3" rotation="30 45 10" shadow="cast: true"></a-torus>

        <!-- Simple Platform Structure -->
        <a-box mixin="stone" static-body position="0 2.5 -10" width="6" height="5" depth="1" shadow="receive: true; cast: true;"></a-box> <!-- Back wall -->
        <a-box mixin="stone" static-body position="-3 0.25 -8" width="1" height="0.5" depth="4" shadow="receive: true; cast: true;"></a-box> <!-- Side platform -->
         <a-box mixin="stone" static-body position="3 0.25 -8" width="1" height="0.5" depth="4" shadow="receive: true; cast: true;"></a-box> <!-- Side platform -->

         <!-- Ramp (made of a rotated box) -->
         <a-box mixin="wood" static-body position="0 0.7 -6" rotation="0 0 -20" width="3" height="0.3" depth="3" shadow="receive: true; cast: true;"></a-box>


        <!-- NOTE: The environment component adds its own lighting, so we remove the manual lights
             unless we want very specific effects. The shadow parameter on environment enables shadows. -->
        <!-- <a-light type="ambient" color="#888"></a-light> -->
        <!-- <a-light type="directional" ... > </a-light> -->

    </a-scene>
</body>
</html>
